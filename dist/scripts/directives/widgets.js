define(["directives/directives"],function(e){e.directive("chosen",function(){var e=function(e,t){e.$watch("receviersList",function(){t.trigger("liszt:updated")}),e.$watch("message.receviers",function(){angular.element(t[0]).trigger("liszt:updated")}),t.chosen()};return{restrict:"A",link:e}}),e.directive("uploader",[function(){return{restrict:"E",scope:{action:"@"},controller:["$scope","$rootScope","Session",function(e,t,n){e.progress="0%",e.avatar="",e.uploadLabel=t.ui.profile.click2upload;var r=n.get();r&&(e.sessionId=r),e.sendFile=function(n){var r=angular.element(n).parents("form");if(angular.element(n).val()=="")return!1;console.log("angular.element(el).val()",angular.element(n).val()),r.attr("action",e.action),e.$apply(function(){e.progress="0%"}),r.ajaxSubmit({type:"POST",headers:{"X-SESSION_ID":e.sessionId},uploadProgress:function(t,n,r,i){console.log("event",t),e.$apply(function(){e.progress=i+"%"})},error:function(e,t,n,r){},success:function(){var r=angular.element(n).val().split("\\"),i=r[r.length-1];e.$apply(function(){e.avatar=i;var n=$(".roundedPicLarge"),r=n.attr("style"),s=0,o,u,a;try{s=parseInt(r.split("?")[1].split("&")[0].split("=")[1],10)}catch(f){console.log(f)}e.$parent.view.clientId?(o=e.$parent.view.clientId,a=t.ui.profile.profileImgSuccessfullyUploaded,u="client"):e.$parent.view.uuid&&(o=e.$parent.view.uuid,a=t.ui.profile.profileImgSuccessfullyUploaded,u="team"),e.$parent.$root.avatarChange(o),t.notifier.success(a),t.showChangedAvatar(u,o);var l=parseInt(s,10)+e.$parent.$root.getAvatarChangeTimes(o),c=r.replace("width="+s,"width="+l);n.attr("style",c)})}})}}],link:function(e,t,n,r){t.find(".fake-uploader").click(function(){t.find('input[type="file"]').click()})},replace:!1,templateUrl:"views/uploader.html"}}]),e.directive("profile",[function(){return{restrict:"E",scope:{memberId:"@"},controller:["$scope",function(e){e.loadMember=function(e){}}],link:function(e,t,n,r){console.log("profile directive ->",n.memberId)},replace:!1,templateUrl:"views/profileTemplate.html"}}]),e.directive("ngenter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){t.which===13&&(e.$apply(function(){e.$eval(n.ngenter)}),t.preventDefault())})}}),e.directive("backImg",function(){return function(e,t,n){var r=n.backImg;t.css({"background-image":"url("+r+")","background-size":"cover"})}}),e.directive("linkIconHovered",function(){return{link:function(e,t){t.parent().bind("mouseenter",function(){t.removeClass("icon-link"),t.addClass("icon-link2")}),t.parent().bind("mouseleave",function(){t.removeClass("icon-link2"),t.addClass("icon-link")})}}}),e.directive("dragEnterLeave",function(){return{link:function(e,t,n){var r=n.dragEnterLeave,i=t.text();t.bind("dragenter",function(){t.addClass(r).text("Drop de spreadsheet.")}),t.bind("dragleave",function(){t.removeClass(r).text(i)})}}}),e.directive("setPositionSlotForm",["$window",function(e){return{restrict:"A",link:function(t,n,r){n.bind("mouseup",function(t){var n=angular.element("#footer").height(),r=angular.element(".time-slot-form"),i=r.height(),s=105,o=i+s,u=t.clientY+e.pageYOffset,a=e.outerHeight-u+o,f=o>t.clientY?u:u-o;r.css("top",f+"px")})}}}]),e.directive("dynamic",["$compile",function(e){return{restrict:"A",replace:!0,link:function(t,n,r){console.log("element",n),t.$watch(r.dynamic,function(r){n.html(r),e(n.contents())(t)})}}}]),e.directive("inputRuleToggle",function(){return{restrict:"A",link:function(e,t,n){var r=n.inputRuleToggle,i=t.parents(".form-group");t.bind("click",function(){if(t.hasClass("add-button"))i.next().removeClass("ng-hide").find("input").focus();else if(t.hasClass("remove-button")){i.addClass("ng-hide").find("input").val(""),i.find(".text-danger small i").text("");var n=angular.element(i[0].previousElementSibling);n.find("input").focus(),e.edit.phoneNumbers[r]&&(e.edit.phoneNumbers.splice(r,1),e.parsedPhoneNumbers[r]={})}})}}}),e.directive("formattedDate",["$filter",function(e){return{link:function(t,n,r,i){i.$formatters.unshift(function(t){return e("date")(t,"dd-MM-yyyy")}),i.$parsers.unshift(function(t){return e("date")(t,"dd-MM-yyyy")})},restrict:"A",require:"ngModel"}}])});