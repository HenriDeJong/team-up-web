define(["services/services","config"],function(e,t){e.factory("Permission",["$rootScope","$resource","$q","Store",function(e,n,r,i){var s=n(t.app.host+"acl",{},{get:{method:"GET",interceptor:{response:function(e){return e}}},save:{method:"PUT",params:{}}}),o={teams:!0,clients:!0,tasks:!0,clientReports:!0,teamTelephone:!0};return s.prototype.getProfile=function(){var e=r.defer();return s.get(function(t){var n=t.data;angular.forEach(t.data,function(e,t){e==0&&delete n[t]}),i("app").save("permissionProfile",n),e.resolve(n)},function(t){e.resolve({error:t})}),e.promise},s.prototype.saveProfile=function(){var e=r.defer();return s.save(o,function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},s.prototype.checkPermission=function(e){var t=i("app").get("permissionProfile");_.filter(t,function(t,n){if(n==e)return t})},new s}])});