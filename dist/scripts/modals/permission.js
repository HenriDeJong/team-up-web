define(["services/services","config"],function(e,t){e.factory("Permission",["$rootScope","$resource","$q","Dater","Store","Teams",function(e,n,r,i,s){var o=n(t.app.host+"/acl",{},{get:{method:"GET",interceptor:{response:function(e){return e}}},save:{method:"PUT",params:{}}}),u={teams:!0,clients:!0,tasks:!0,clientReports:!0,teamTelephone:!0};return o.prototype.getProfile=function(){var e=r.defer();return o.get(function(t){var n=t.data;angular.forEach(t.data,function(e,t){e==0&&delete n[t]}),s("app").save("permissionProfile",n),e.resolve(n)},function(t){e.resolve({error:t})}),e.promise},o.prototype.saveProfile=function(){var e=r.defer();return o.save(u,function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},o.prototype.checkPermission=function(e){var t=s("app").get("permissionProfile");_.filter(t,function(t,n){if(n==e)return t})},new o}])});