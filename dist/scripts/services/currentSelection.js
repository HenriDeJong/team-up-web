define(["services/services"],function(e){e.factory("CurrentSelection",["$rootScope","Store","Teams",function(e,t,n){var r=t("app").get("teams"),i=n.queryLocalClientGroup(r);return{get local(){return t("app").get("currentTeamClientGroup")},set local(e){var t=i[e],n=_.invert(i)[t]||null;_.isNull(n)&&(n=_.invert(i)[e],t=i[n]),this.update(n,t)},update:function(e,n){t("app").save("currentTeamClientGroup",{teamId:e,clientGroupId:n})},init:function(){if(Object.keys(this.local).length==1){var t=e.app.resources.teamUuids[0],n=i[t];this.update(t,n)}return this.local},getTeamId:function(){return this.local.teamId||this.init().teamId},getClientGroupId:function(){return this.local.clientGroupId||this.init().clientGroupId}}}])});