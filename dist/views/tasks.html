<div class="page-header"></div>
<div class="tabbable tabs-left">
  <ul style="margin-right: 0px" class="nav nav-tabs nav-tabs-app">
    <li class="{{(views.myTasks==true) &amp;&amp; 'active'}}"><a data-toggle="tab" ng-click="setViewTo(&quot;myTasks&quot;)"><span data-icon="" aria-hidden="true" class="icomoon"></span>Mijn Taken</a></li>
    <li class="{{(views.allTasks==true) &amp;&amp; 'active'}}"><a data-toggle="tab" ng-click="setViewTo(&quot;allTasks&quot;)"><span data-icon="" aria-hidden="true" class="icomoon"></span>Alle Taken</a></li>
    <li class="{{(views.newTask==true) &amp;&amp; 'active'}}"><a data-toggle="tab" ng-click="setViewTo(&quot;newTask&quot;)"><span data-icon="" aria-hidden="true" class="icomoon"></span>Nieuwe Taak</a></li>
  </ul>
  <div class="tab-content">
    <div id="myTasks" class="tab-pane {{(views.myTasks==true) &amp;&amp; 'active'}}">
      <div class="tab-header hide">
        <h3 class="pull-left">{{ui.task.myTask}}</h3>
        <select ng-model="currentOrder" ng-options="order.id as order.name for order in orders" ng-selected="currentOrder" ng-change="tasksOrderBy(currentOrder)" class="pull-right">				</select><span class="pull-right">{{ui.task.orderby}}</span>
      </div>
      <div class="tab-header hide">
        <input type="text" class="pull-left">
        <button type="reset" class="btn pull-right btn-info marginLeftTen">{{ui.teamup.cancel}}</button>
        <button type="button" class="btn pull-right btn-info marginLeftTen">{{ui.teamup.save}}</button>
      </div>
      <hr>
      <p ng-hide="myTasks.length &gt; 0">{{ui.task.noTasks}}				</p>
      <div ng-show="myTasks.length &gt; 0">
        <table class="table table-striped taskTable">
          <thead>
            <tr>
              <th></th>
              <th></th>
              <th><a ng-click="resort(&quot;clientName&quot;)">{{ui.task.clientName}}</a></th>
              <th><a>{{ui.task.information}}</a></th>
              <th><a ng-click="resort(&quot;plannedEndVisitTime&quot;)">{{ui.task.planningTime}}</a></th>
              <th></th>
            </tr>
          </thead>
          <tbody ui-sortable="sortableOptions">
            <tr ng-repeat="task in myTasks|orderBy:orderItem:reverse">
              <td>
                <div class="dragIcon"></div>
              </td>
              <td>
                <div style="background-image: url({{task.relatedClientUuid | avatar:&quot;client&quot;:&quot;80&quot;}})" class="roundedPicSmall memberStateBusy">						</div>
              </td>
              <td><a href="index.html#/clientProfile/{{task.relatedClientUuid}}#viewClient">{{task.relatedClientUuid | getObjAttr:"client":"name" }}</a></td>
              <td>
                <dl><span aria-hidden="true" data-icon="" class="taskIcon icon-location4"></span><span class="taskInfo"> km {{task.relatedClientUuid | getObjAttr:"client":"address" }}<a href="http://maps.google.com/?q={{task.relatedClientUuid | getObjAttr:&quot;client&quot;:&quot;latlong&quot; }}">{{ui.teamup.map}}								</a></span></dl>
                <dl>
                  <dd>{{task.description}}</dd>
                </dl>
              </td>
              <td>
                <dl><span aria-hidden="true" class="taskIcon icon-time"></span><span class="taskInfo">{{task.plannedStartVisitTime | date:'EEEE'}} {{task.plannedStartVisitTime | date:'HH:mm'}} - {{task.plannedEndVisitTime | date:'HH:mm'}} uur</span></dl>
              </td>
              <td>
                <div class="pull-right"><a href="#"></a>
                  <button type="button" ng-click="unassignYourself(task)" class="btn-primary btn-mini"><i class="icon-minus"></i></button>
                  <button type="button" ng-click="deleteTask(task)" class="btn-primary btn-mini"><i class="icon-trash"></i></button>
                </div>
              </td>
            </tr>
          </tbody>
        </table><span class="muted pull-right"><small><i>{{myTasks.length | i18n_spec:'groups.memberCount'}}</i></small></span>
      </div>
    </div>
    <div id="allTasks" class="tab-pane {{(views.allTasks==true) &amp;&amp; 'active'}}">
      <div class="tab-header hide">
        <h3 class="pull-left">{{ui.task.allTasks}}</h3>
        <select ng-model="currentOrder" ng-options="order.id as order.name for order in orders" ng-selected="currentOrder" ng-change="tasksOrderBy(currentOrder)" class="pull-right">				</select><span class="pull-right">{{ui.task.orderby}}				</span>
      </div>
      <div class="tab-header hide">
        <input type="text" class="pull-left">
        <button type="reset" class="btn pull-right btn-info marginLeftTen">{{ui.teamup.cancel}}</button>
        <button type="button" class="btn pull-right btn-info marginLeftTen">{{ui.teamup.save}}</button>
      </div>
      <hr>
      <p ng-hide="allTasks.length || allTasks.length &gt; 0">{{ui.task.noTasks}}								</p>
      <div ng-show="allTasks.length || allTasks.length &gt; 0">
        <table class="table table-striped taskTable">
          <thead>
            <tr>
              <th></th>
              <th><a ng-click="resort(&quot;clientName&quot;)">{{ui.task.clientName}}</a></th>
              <th><a>{{ui.task.information}}</a></th>
              <th></th>
              <th><a ng-click="resort(&quot;memberName&quot;)">{{ui.task.memberName}}</a></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="task in allTasks|orderBy:orderItem:reverse">
              <td>
                <div style="background-image: url({{task.relatedClientUuid | avatar:&quot;client&quot;:&quot;80&quot;}})" class="roundedPicSmall memberStateBusy">						</div>
              </td>
              <td><a href="index.html#/clientProfile/{{task.relatedClientUuid}}#viewClient">{{task.relatedClientUuid | getObjAttr:"client":"name" }}</a></td>
              <td>
                <dl><span aria-hidden="true" data-icon="" class="taskIcon icon-location4"></span><span class="taskInfo">km {{task.relatedClientUuid | getObjAttr:"client":"address" }}<a href="http://maps.google.com/?q={{task.relatedClientUuid | getObjAttr:&quot;client&quot;:&quot;latlong&quot; }}">{{ui.teamup.map}}</a></span></dl>
                <dl><span aria-hidden="true" class="taskIcon icon-time"></span><span class="taskInfo">{{task.plannedStartVisitTime | date:'EEEE'}} {{task.plannedStartVisitTime | date:'HH:mm'}} - {{task.plannedEndVisitTime | date:'HH:mm'}} uur</span></dl>
                <dl>
                  <dd>{{task.description}}</dd>
                </dl>
              </td>
              <td>
                <div style="background-image: url({{task.assignedTeamMemberUuid | avatar:&quot;team&quot;:&quot;80&quot;}})" ng-hide="{{task.assignedTeamMemberUuid == null}}" class="roundedPicSmall {{task.assignedTeamMemberUuid | getObjAttr:&quot;member&quot;:&quot;states&quot; | stateColor}}"></div>
              </td>
              <!-- FIXME: Check this upper line!-->
              <td>								<a href="index.html#/profile/{{task.assignedTeamMemberUuid}}#profile">{{task.assignedTeamMemberUuid | getObjAttr:"member":"name" }}						</a></td>
              <td>
                <div class="pull-right">
                  <button type="button" ng-hide="task.assignedTeamMemberUuid" ng-click="assignYourself(task)" class="btn-primary btn-mini"><i class="icon-plus">									</i></button>
                  <button type="button" ng-click="deleteTask(task)" class="btn-primary btn-mini"><i class="icon-trash"></i></button>
                </div>
              </td>
            </tr>
          </tbody>
        </table><span class="muted pull-right"><small><i>{{allTasks.length | i18n_spec:'groups.memberCount'}}</i></small></span>
      </div>
    </div>
    <div id="newTask" class="tab-pane {{(views.newTask==true) &amp;&amp; 'active'}}">
      <div class="tab-header">
        <h3 class="pull-left">Nieuwe taak			</h3>
      </div>
      <hr>
      <form>
        <div class="row">
          <div class="span6">
            <fieldset>
              <div class="control-group">
                <label class="control-label">Cliënt</label>
                <div class="controls">
                  <select ng-model="currentGroup" ng-options="g.id as g.name for g in groups | orderBy:&quot;name&quot;" ng-selected="currentGroup" ng-change="changeClientGroup(currentGroup)">
                    <option value="">Cliëntengroep</option>
                  </select>
                  <select ng-model="task.client" ng-options="c.uuid as (c.firstName + &quot; &quot; + c.lastName) for c in clients | orderBy:&quot;lastName&quot; " ng-selected="currentClient" ng-change="changeClient(task.client)">
                    <option value="">Cliënt										</option>
                  </select>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">Verzorger</label>
                <div class="controls">
                  <select ng-model="task.team" ng-options="t.uuid as t.name for t in teams | orderBy:&quot;name&quot; " ng-selected="currentTeam" ng-change="changeTeam(task.team)">
                    <option value="">Team</option>
                  </select>
                  <select ng-model="task.member" ng-options="m.uuid as (m.firstName + &quot; &quot; + m.lastName) for m in members | orderBy:&quot;lastName&quot; " ng-selected="currentMember" ng-change="">
                    <option value="">Lid</option>
                  </select>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <div class="control-group dater">
                <label class="control-label">{{ui.planboard.from}}</label>
                <div class="controls">
                  <input name="date-start" type="text" ng-model="task.start.date" data-date-format="dd-mm-yyyy" bs-datepicker="" ng-change="changeDate(date)"><i class="icon-calendar"></i>
                  <input name="time-start" type="text" ng-model="task.start.time" ng-change="changeTime(time)" bs-timepicker=""><i class="icon-time"></i>
                </div>
              </div>
              <div class="control-group dater">
                <label class="control-label">{{ui.planboard.till}}</label>
                <div class="controls">
                  <input name="date-end" type="text" ng-model="task.end.date" data-date-format="dd-mm-yyyy" bs-datepicker="" ng-change="changeDate(date)"><i class="icon-calendar"></i>
                  <input name="time-end" type="text" ng-model="task.end.time" ng-change="changeTime(time)" bs-timepicker=""><i class="icon-time"></i>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">{{ui.task.description}}</label>
                <div class="controls">
                  <textarea ng-model="task.description" class="span4"></textarea>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="span6">
            <fieldset>
              <div class="control-group"></div>
              <google-map center="map.center" zoom="map.zoom" id="task-map" draggable="true" dragging="map.dragging">
                <marker coords="clientCoords"></marker>
                <markers models="memberMarkers"></markers>
              </google-map>
            </fieldset>
          </div>
        </div>
        <hr>
        <div class="form-actions">
          <button type="button" ng-click="createTask(task)" class="btn btn-success">{{ui.teamup.saveMember}}</button>
        </div>
        <hr>
        <!-- FIXME: It needs some attention-->
        <!-- div{{currentGroup}} = {{currentClient}} ||  {{currentTeam}} = {{currentMember}}-->
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </form>
    </div>
  </div>
</div>